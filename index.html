<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading States</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(10px); }
            20%, 80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }
        
        .spinner {
            animation: spin 1s linear infinite;
        }
        
        .pulse-text {
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        .fade-message {
            animation: fadeInOut 3s ease-in-out;
        }
        
        .loading-circle {
            width: 120px;
            height: 120px;
            border: 6px solid #e5e7eb;
            border-top: 6px solid #10b981;
            border-radius: 50%;
        }
        
        .dark .loading-circle {
            border-color: #374151;
            border-top-color: #10b981;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 min-h-screen flex items-center justify-center transition-colors duration-300">
    <div class="text-center p-8 max-w-md w-full mx-4">
        <!-- Loading Spinner -->
        <div class="flex justify-center mb-8">
            <div class="loading-circle spinner"></div>
        </div>
        
        <!-- Main Loading Message -->
        <div id="loadingMessage" class="text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-6 pulse-text">
            Loading....
        </div>
        
        <!-- Status Messages Container -->
        <div id="statusContainer" class="space-y-4 min-h-[120px]">
            <!-- Messages will be dynamically inserted here -->
        </div>
        
        <!-- Retry Button (hidden initially) -->
        <button id="retryButton" class="hidden mt-6 px-6 py-3 bg-emerald-500 hover:bg-emerald-600 text-white font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900">
            Try Again
        </button>
    </div>

    <script>
        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        const statusContainer = document.getElementById('statusContainer');
        const retryButton = document.getElementById('retryButton');
        const loadingMessage = document.getElementById('loadingMessage');

        function showMessage(text, className = '', duration = 3000) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `text-lg text-gray-600 dark:text-gray-400 fade-message ${className}`;
            messageDiv.textContent = text;
            
            statusContainer.appendChild(messageDiv);
            
            // Remove the message after animation completes
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, duration);
        }

        function startLoadingSequence() {
            // Reset state
            statusContainer.innerHTML = '';
            retryButton.classList.add('hidden');
            loadingMessage.textContent = 'Loading....';
            loadingMessage.classList.add('pulse-text');
            
            // Show first message after 2 seconds
            setTimeout(() => {
                showMessage('Check your internet connection and try again', 'text-yellow-600 dark:text-yellow-400');
            }, 2000);
            
            // Show second message after 5 seconds
            setTimeout(() => {
                showMessage('System busy !', 'text-red-600 dark:text-red-400');
            }, 5000);
            
            // Show retry button and stop main loading after 8 seconds
            setTimeout(() => {
                loadingMessage.classList.remove('pulse-text');
                loadingMessage.textContent = 'Unable to connect';
                loadingMessage.classList.add('text-red-600', 'dark:text-red-400');
                retryButton.classList.remove('hidden');
            }, 8000);
        }

        // Retry button functionality
        retryButton.addEventListener('click', () => {
            loadingMessage.classList.remove('text-red-600', 'dark:text-red-400');
            loadingMessage.classList.add('text-gray-800', 'dark:text-gray-200');
            startLoadingSequence();
        });

        // Start the loading sequence immediately
        startLoadingSequence();
    </script>
</body>
</html>
